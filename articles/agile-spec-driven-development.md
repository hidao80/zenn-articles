---
title: 軽量SDD：AI活用開発スタイルの再定義
emoji: "🧠"
type: "idea"
topics: ["ai","SDD","programming", "軽量SDD"]
published: false
---
## はじめに

:::message alert
本記事には一部、AIにより生成された文章が含まれます。
:::

## tl;dr

Claude CodeなどのAIコーディングエージェントを使った開発を効率化するために、「AI向けにもドキュメント作ろう。そのドキュメント作成もAIにやらせよう」と言う話。どのみちプログラマーは`/explain`コマンドを使うの見越して。

:::message
- **想定対象読者**: AIコーディングエージェントを用いた開発をするプログラマーやSE
- **前提知識**: 
  - SDD（Spec-driven development）[^1]を知っている
  - プログラミング経験：中級程度
  - AI利用経験：Claude Code、Codex CLI、Gemini CLIなどのAIコーディングエージェントを使ったことがある
:::

多くのプログラマーはAIに質問しながらコーディングするので、AIコーディングエージェント（以下「AI」と表記）が理解できる仕様を自然言語でドキュメント化して、AIに渡すことがプログラマーとAI両方の認知負荷を下げることにつながると考えました。  
ここではこの手法を「軽量SDD（Lightweight Spec-driven Development）」と呼びます。

## 軽量SDDの基本ループ
1. 要件定義書とDesign docは人間が作成
   - AIが読みやすいようにMarkdown化
2. コード生成  
   - AIにプロンプトと要件定義書、Design docのMarkdown版を渡してソースコードを生成
3. AIによる反復的なMemory doc（仮）の更新
   - プロンプトによってプロジェクト要約をAIに作らせる。Serena-mcp的な仕事。このへんはIDEのプラグインなどで自動化できると良い
   - このドキュメントはMarkdown形式で作成させ、プロジェクト内でAIにコーディングさせるためのコンテキスト外部記憶として利用
   - Memory docの統一・バージョン管理は、リポジトリ直下に`spec/`ディレクトリを置き、リポジトリ内で管理して解決する
   - **重要**：このドキュメントは人間が閲覧・編集可能
4. 人間によるコードとMemory docのレビュー
5. 改善ループ
   - Memory docを参照させながらAIに追加機能や修正をプロンプトとして渡す
   - コード編集 → AIによるMemory doc更新を繰り返す
6. 仕様変更時
   - アジャイル開発的に仕様変更が発生した時は、改善ループ中に要件定義書や仕様書、Design docに人間が手を加える
   - その内容を再度AIに読ませ、Memory docを更新させて、改善ループに戻る
   - これらのドキュメントはリポジトリ内の`spec/`に持たせておくとなお良し

:::details 基本ループの図
```mermaid
flowchart LR
    A[要件定義書とDesign docを人間が作成]
    A --> C[AIに質問してコード生成]
    C --> D[コードを元にAIがMemory doc編集]
    D --> E[人間によるコードとMemory docのレビュー]
    E --> C
```
:::

:::details Memory docの例

:::

## メリット
- **コンテキスト短縮**：長大な履歴やプロジェクト全体のソースを渡さなくても、要約済みのMemory docでAIがアタリを付けられる
- **人間によるコンテキストのレビュー・編集が可能**：AIが生成したコンテキスト要約を人間がレビュー・編集できるので、透明性と柔軟性を確保
- **AI向けだけど人間も読める**：Markdown形式なので、AIの外部記憶でありながら人間のレビュー資料にもなる

## ドキュメント保守戦略

### 更新タイミング
- **Memory doc**: AIが機能追加・修正の都度自動更新
- **要件定義書**: スプリント開始時に人間が更新
- **Design doc**: 大きなアーキテクチャ変更時のみ人間が更新

### 乖離防止策
1. プルリクエスト時にMemory docの更新を確認
2. CI/CDで「コード変更あり + Memory doc更新なし」を警告
3. 週次でMemory docとコードの整合性レビュー

### 運用ルール
- 肥大化したら機能単位で分割（例: `spec/auth.md`, `spec/api.md`）

## 軽量SDDが向いているケース

### 推奨
- 新規プロジェクト（1〜3ヶ月程度）
- チーム規模: 1〜3名
- 仕様が比較的明確な開発
- APIサーバー、CLIツール、Webアプリなど

### 要検討
- レガシーコード改修（既存ドキュメントとの整合性）
- 探索的プロトタイピング（仕様が流動的）
- 大規模チーム（ドキュメント保守負荷）
- リアルタイム性が求められる開発

### 非推奨
- セキュリティクリティカルな部分（AI生成コードの精査が必須）
- パフォーマンスチューニングが必要な箇所（人間の最適化が必要）

## まとめ
軽量SDDは「**AIがコードを理解するための自然言語ドキュメント**」を中心に回す開発手法です。開発環境としてはMCPや外部サービスを使わなくても、AIだけで運用可能です。

運用方法として、以下の割り切りが重要です：  
- AIはコーディングが得意な相棒とみなして活用すると考える
- 細部の修正はやはり人の手の方が今のところ早い事は確か
- ドキュメントはAIが理解できれば十分。分からない時はAIに質問してから該当するソースコードを読めばいい
- 人間が読むのはおまけだが、レビューや共有には役立つ
- 要件定義 → Design doc → ソース生成 → Memory doc更新 → ソース生成、というループを回す
- プロジェクトでの仕様粒度も`spec/`内でできればなお良し

[^1]: GitHub Blog. (2025). "Spec-driven development with AI: Get started with a new open source toolkit" https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/
